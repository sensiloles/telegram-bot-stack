# ü§ñ Cloud Agent Configuration for Quit Smoking Bot
# This configuration enables automated issue management via voice/text commands
# with intelligent task breakdown, labeling, and acceptance criteria generation

version: "1.0"
project:
  name: "Quit Smoking Bot"
  repository: "quit-smoking-bot"
  default_branch: "main"

# üéØ Issue Creation Settings
issue_creation:
  # Enable voice and text command processing
  input_modes:
    - voice
    - text
    - web_interface

  # AI-powered task analysis
  ai_analysis:
    enabled: true
    model: "gpt-4"
    temperature: 0.3 # Lower for more consistent output

    # Task complexity detection
    complexity_analysis:
      enabled: true
      thresholds:
        simple: 1-3 # hours
        medium: 4-8 # hours
        complex: 9-24 # hours
        epic: 25+ # hours

  # Automatic subtask generation
  subtask_generation:
    enabled: true
    max_subtasks: 10
    min_subtasks: 2

    # Rules for breaking down tasks
    breakdown_rules:
      - type: "feature"
        split_by: ["frontend", "backend", "testing", "documentation"]
      - type: "bug"
        split_by: ["reproduce", "fix", "test", "verify"]
      - type: "refactor"
        split_by: ["analysis", "implementation", "testing", "cleanup"]
      - type: "documentation"
        split_by: ["research", "writing", "review", "publish"]

  # Intelligent labeling system
  auto_labeling:
    enabled: true

    # Project-specific labels
    labels:
      # Type labels
      type:
        - name: "feature"
          color: "0E8A16"
          keywords: ["add", "implement", "create", "new feature"]
        - name: "bug"
          color: "D73A4A"
          keywords: ["fix", "error", "crash", "issue", "problem"]
        - name: "refactor"
          color: "FFA500"
          keywords: ["refactor", "improve", "optimize", "clean up"]
        - name: "docs"
          color: "0075CA"
          keywords: ["documentation", "readme", "guide", "tutorial"]
        - name: "test"
          color: "FBCA04"
          keywords: ["test", "testing", "unit test", "integration"]
        - name: "chore"
          color: "CFD3D7"
          keywords: ["chore", "maintenance", "dependencies", "config"]
        - name: "security"
          color: "D93F0B"
          keywords: ["security", "vulnerability", "auth", "token"]

      # Priority labels
      priority:
        - name: "priority:critical"
          color: "B60205"
          keywords: ["critical", "urgent", "breaking", "production down"]
        - name: "priority:high"
          color: "D93F0B"
          keywords: ["high priority", "important", "soon"]
        - name: "priority:medium"
          color: "FBCA04"
          keywords: ["medium priority", "normal"]
        - name: "priority:low"
          color: "0E8A16"
          keywords: ["low priority", "nice to have", "enhancement"]

      # Component labels (specific to quit-smoking-bot)
      component:
        - name: "component:bot"
          color: "C5DEF5"
          keywords: ["bot", "telegram", "commands", "handlers"]
        - name: "component:notifications"
          color: "BFD4F2"
          keywords: ["notification", "schedule", "reminder", "alert"]
        - name: "component:users"
          color: "D4C5F9"
          keywords: ["user", "admin", "authentication", "permissions"]
        - name: "component:prize"
          color: "F9D0C4"
          keywords: ["prize", "fund", "calculation", "reward"]
        - name: "component:docker"
          color: "0DB7ED"
          keywords: ["docker", "container", "deployment", "compose"]
        - name: "component:monitoring"
          color: "C2E0C6"
          keywords: ["monitoring", "health", "logs", "status"]
        - name: "component:cli"
          color: "E4E669"
          keywords: ["cli", "manager", "command line", "scripts"]

      # Status labels
      status:
        - name: "status:planning"
          color: "D4C5F9"
        - name: "status:in-progress"
          color: "0E8A16"
        - name: "status:blocked"
          color: "D93F0B"
        - name: "status:review"
          color: "FBCA04"
        - name: "status:done"
          color: "CFD3D7"

  # File attachment handling
  file_attachments:
    enabled: true
    allowed_types:
      - ".py"
      - ".yml"
      - ".yaml"
      - ".json"
      - ".md"
      - ".txt"
      - ".log"
      - ".png"
      - ".jpg"
      - ".jpeg"
    max_size_mb: 10
    auto_analysis: true # Analyze code files for context

# üìã Acceptance Criteria Generation
acceptance_criteria:
  enabled: true

  # Template structure
  template: |
    ## ‚úÖ Acceptance Criteria

    ### Functional Requirements
    {functional_requirements}

    ### Technical Requirements
    {technical_requirements}

    ### Testing Requirements
    {testing_requirements}

    ### Documentation Requirements
    {documentation_requirements}

  # AI-generated criteria rules
  generation_rules:
    functional:
      - "User can {action}"
      - "System {behavior}"
      - "{Feature} works as expected"

    technical:
      - "Code follows project style guide"
      - "No linting errors"
      - "Performance impact is minimal"
      - "Security best practices are followed"

    testing:
      - "Unit tests cover new functionality"
      - "Integration tests pass"
      - "Manual testing completed"
      - "Edge cases handled"

    documentation:
      - "README.md updated if needed"
      - "Code comments added"
      - "API documentation updated"
      - "Changelog entry added"

# üé§ Voice Command Processing
voice_commands:
  enabled: true

  # Language support
  languages:
    - "en" # English
    - "ru" # Russian

  # Command patterns
  patterns:
    create_issue:
      - "create issue {description}"
      - "new task {description}"
      - "add issue about {description}"
      - "—Å–æ–∑–¥–∞—Ç—å issue {description}"
      - "–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ {description}"

    add_label:
      - "label as {label}"
      - "add label {label}"
      - "mark as {label}"
      - "–ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ {label}"

    set_priority:
      - "priority {level}"
      - "set priority to {level}"
      - "–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç {level}"

    assign:
      - "assign to {user}"
      - "–Ω–∞–∑–Ω–∞—á–∏—Ç—å –Ω–∞ {user}"

# üîÑ Automation Workflows
workflows:
  # Auto-assign based on component
  auto_assign:
    enabled: true
    rules:
      - component: "component:bot"
        assign_to: ["@bot-team"]
      - component: "component:docker"
        assign_to: ["@devops-team"]
      - labels: ["bug", "priority:critical"]
        assign_to: ["@on-call"]

  # Auto-milestone assignment
  auto_milestone:
    enabled: true
    rules:
      - labels: ["priority:critical"]
        milestone: "Current Sprint"
      - labels: ["enhancement", "priority:low"]
        milestone: "Backlog"

  # Auto-project board
  auto_project:
    enabled: true
    default_project: "Quit Smoking Bot Development"
    column_mapping:
      created: "To Do"
      in_progress: "In Progress"
      review: "In Review"
      done: "Done"

# üìä Issue Templates
issue_templates:
  # Feature Request Template
  feature:
    title_prefix: "[Feature]"
    template: |
      ## üéØ Feature Description
      {description}

      ## üí° Motivation
      {motivation}

      ## üìã Proposed Implementation
      {implementation}

      ## ‚ö° Impact
      - **Users**: {user_impact}
      - **System**: {system_impact}

      ## üîó Related Issues
      {related_issues}

    default_labels: ["feature", "status:planning"]

  # Bug Report Template
  bug:
    title_prefix: "[Bug]"
    template: |
      ## üêõ Bug Description
      {description}

      ## üìù Steps to Reproduce
      {steps}

      ## üîç Expected Behavior
      {expected}

      ## ‚ùå Actual Behavior
      {actual}

      ## üåç Environment
      - **OS**: {os}
      - **Python**: {python_version}
      - **Bot Version**: {bot_version}

      ## üìé Logs/Screenshots
      {attachments}

    default_labels: ["bug", "status:planning"]

  # Refactoring Template
  refactor:
    title_prefix: "[Refactor]"
    template: |
      ## üîß Refactoring Goal
      {goal}

      ## üìç Current State
      {current_state}

      ## ‚ú® Desired State
      {desired_state}

      ## üéØ Benefits
      {benefits}

      ## ‚ö†Ô∏è Risks
      {risks}

    default_labels: ["refactor", "status:planning"]

# üîç Context Analysis
context_analysis:
  enabled: true

  # Analyze repository context
  analyze_codebase:
    enabled: true
    scan_paths:
      - "src/"
      - "scripts/"
      - "docker/"

    # Find related code
    find_related_files: true
    suggest_impacted_areas: true

  # Analyze git history
  analyze_git_history:
    enabled: true
    lookback_commits: 100
    find_similar_issues: true
    suggest_reviewers: true

# üé® UI Customization
ui:
  # Custom commands in GitHub UI
  slash_commands:
    - command: "/breakdown"
      description: "Break this issue into subtasks"
      action: "generate_subtasks"

    - command: "/estimate"
      description: "Estimate complexity and time"
      action: "estimate_complexity"

    - command: "/accept"
      description: "Generate acceptance criteria"
      action: "generate_acceptance_criteria"

    - command: "/relate"
      description: "Find related issues and files"
      action: "find_related_context"

# üîê Security & Permissions
security:
  # Required permissions for Cloud Agent
  required_permissions:
    - "issues:write"
    - "contents:read"
    - "pull_requests:write"

  # Allowed users (can be GitHub usernames or teams)
  allowed_users:
    - "@owner"
    - "@collaborators"

  # Rate limiting
  rate_limits:
    issues_per_hour: 10
    api_calls_per_minute: 60

# üìà Analytics & Reporting
analytics:
  enabled: true

  # Track metrics
  track_metrics:
    - "issue_creation_time"
    - "subtask_completion_rate"
    - "label_accuracy"
    - "acceptance_criteria_usage"

  # Generate reports
  reports:
    - type: "weekly_summary"
      schedule: "0 9 * * MON" # Every Monday at 9 AM
    - type: "monthly_metrics"
      schedule: "0 9 1 * *" # 1st of each month at 9 AM

# üîî Notifications
notifications:
  enabled: true

  # Notification channels
  channels:
    - type: "github"
      enabled: true
    - type: "email"
      enabled: false
    - type: "slack"
      enabled: false
      webhook_url: "${SLACK_WEBHOOK_URL}"

  # Events to notify
  events:
    - "issue_created"
    - "subtasks_generated"
    - "critical_issue_detected"
    - "milestone_completed"

# üß™ Testing & Validation
testing:
  # Test mode (doesn't create real issues)
  test_mode: false

  # Validation rules
  validation:
    - rule: "title_not_empty"
      message: "Issue title cannot be empty"
    - rule: "description_min_length"
      min_length: 10
      message: "Description must be at least 10 characters"
    - rule: "no_duplicate_titles"
      message: "An issue with this title already exists"

# üåç Localization
localization:
  default_language: "en"

  # Response messages in different languages
  messages:
    en:
      issue_created: "‚úÖ Issue created successfully: {issue_url}"
      subtasks_generated: "üìã Generated {count} subtasks"
      error: "‚ùå Error: {error_message}"

    ru:
      issue_created: "‚úÖ Issue —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω: {issue_url}"
      subtasks_generated: "üìã –°–æ–∑–¥–∞–Ω–æ {count} –ø–æ–¥–∑–∞–¥–∞—á"
      error: "‚ùå –û—à–∏–±–∫–∞: {error_message}"
