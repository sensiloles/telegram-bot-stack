[tox]
envlist = py39,py310,py311,py312
isolated_build = True
skip_missing_interpreters = True

[testenv]
description = Run tests with {basepython}
deps =
    pytest>=8.1.1
    pytest-cov>=5.0.0
    pytest-asyncio>=0.23.6
    pytest-mock>=3.14.0
commands =
    pytest {posargs:--cov=telegram_bot_stack --cov-report=term}

[testenv:lint]
description = Run linters (ruff)
deps =
    ruff>=0.6.0
commands =
    ruff check .

[testenv:format]
description = Check code formatting
deps =
    ruff>=0.6.0
commands =
    ruff format --check .

[testenv:type]
description = Run type checking (mypy)
deps =
    mypy>=1.9.0
    types-PyYAML
commands =
    mypy telegram_bot_stack --config-file=pyproject.toml

[testenv:all]
description = Run all checks (lint, format, type, tests)
deps =
    pytest>=8.1.1
    pytest-cov>=5.0.0
    pytest-asyncio>=0.23.6
    pytest-mock>=3.14.0
    ruff>=0.6.0
    mypy>=1.9.0
    types-PyYAML
commands =
    ruff check .
    ruff format --check .
    mypy telegram_bot_stack --config-file=pyproject.toml
    pytest --cov=telegram_bot_stack --cov-report=term

[testenv:dev]
description = Development environment (install package in editable mode)
usedevelop = True
deps =
    pytest>=8.1.1
    pytest-cov>=5.0.0
    pytest-asyncio>=0.23.6
    pytest-mock>=3.14.0
    ruff>=0.6.0
    mypy>=1.9.0
    types-PyYAML
commands = python -c "print('Development environment ready')"
